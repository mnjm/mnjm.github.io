---
import Icon from "./Icon.astro";
const { frontmatter } = Astro.props;
const {
  pubDate,
  lastModDate,
  category,
  tags,
  readingTime,
}: {
  pubDate: string;
  lastModDate?: string;
  category: string;
  tags: string[];
  readingTime: string;
} = frontmatter;

function formatDate(date: Date | string): string {
  return new Date(date).toLocaleDateString("en-US", {
    year: "numeric",
    month: "short",
    day: "2-digit",
  });
}

const infoItems = [
  { icon: "calender", text: formatDate(pubDate) },
  ...(lastModDate ? [{ icon: "edit", text: formatDate(lastModDate) }] : []),
  { icon: "time", text: readingTime },
];
---

<div class="mb-2 flex flex-wrap items-center space-x-1 text-sm text-neutral-300">
  {
    infoItems.map((item, index) => (
      <div class="flex items-center space-x-1">
        <Icon name={item.icon} class="h-4 w-4" />
        <span>{item.text}</span>
        {index < infoItems.length - 1 && <span class="mx-2">·</span>}
      </div>
    ))
  }
</div>

<div class="flex flex-wrap items-center space-x-1 text-sm text-neutral-300">
  <div class="flex items-center space-x-1">
    <Icon name="book" class="h-4 w-4" />
    <span>{category}</span>
  </div>

  {
    tags.length > 0 && (
      <>
        <span class="mx-2">·</span>
        <div class="flex items-center space-x-1">
          <Icon name="tag" class="h-4 w-4" />
          <span>
            {tags.map((tag: string, index: number) => (
              <>
                <span>
                  {tag}
                  {index < tags.length - 1 ? ", " : ""}
                </span>
              </>
            ))}
          </span>
        </div>
      </>
    )
  }
</div>
